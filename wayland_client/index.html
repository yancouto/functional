<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Client-side Wayland connector"><title>wayland_client - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-e935ef01ae1c1829.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="wayland_client" data-themes="" data-resource-suffix="" data-rustdoc-version="1.78.0-nightly (3406ada96 2024-02-21)" data-channel="nightly" data-search-js="search-dd67cee4cfa65049.js" data-settings-js="settings-4313503d2e1961c2.js" ><script src="../static.files/storage-4c98445ec4002617.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-c37d3936c59ababd.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-04d5337699b92874.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../wayland_client/index.html">wayland_client</a><span class="version">0.29.5</span></h2></div><div class="sidebar-elems"><ul class="block">
            <li><a id="all-types" href="all.html">All Items</a></li></ul><section><ul class="block"><li><a href="#modules">Modules</a></li><li><a href="#macros">Macros</a></li><li><a href="#structs">Structs</a></li><li><a href="#enums">Enums</a></li><li><a href="#traits">Traits</a></li></ul></section></div></nav><div class="sidebar-resizer"></div>
    <main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><div id="sidebar-button" tabindex="-1"><a href="../wayland_client/all.html" title="show sidebar"></a></div><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" tabindex="-1"><a href="../help.html" title="help">?</a></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Crate <a class="mod" href="#">wayland_client</a><button id="copy-path" title="Copy item path to clipboard"><img src="../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="src" href="../src/wayland_client/lib.rs.html#1-321">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Client-side Wayland connector</p>
<h3 id="overview"><a class="doc-anchor" href="#overview">§</a>Overview</h3>
<p>This crate provides the interfaces and machinery to safely create
client applications for the Wayland protocol. It can be used as a rust
implementation of the protocol or as a wrapper around the system-wide
<code>libwayland-client.so</code> if you enable the <code>use_system_lib</code> cargo feature.</p>
<p>The Wayland protocol revolves around the creation of various objects
and the exchange of messages associated to these objects. The initial
object is always the <code>Display</code>, that you get at initialization of the
connection, exposed by this crate as <code>Display::connect_to_env()</code>.</p>
<h3 id="protocol-and-messages-handling-model"><a class="doc-anchor" href="#protocol-and-messages-handling-model">§</a>Protocol and messages handling model</h3>
<p>The protocol being bi-directional, you can send and receive messages.
Sending messages is done via methods of Rust objects corresponding to the wayland protocol
objects, receiving and handling them is done by providing callbacks.</p>
<h4 id="proxies"><a class="doc-anchor" href="#proxies">§</a>Proxies</h4>
<p>Wayland objects are represented by proxies, which are handles to them.
You can interact with them in 4 states:</p>
<ul>
<li>As the interface object directly <code>I</code>. This representation is the most immediate
one. It allows you to send requests though this object and can be send accross threads.</li>
<li>As a <code>Proxy&lt;I&gt;</code>. This representation is suitable if you want to access the proxy as
a proxy, rather than a wayland object. You can convert between <code>I</code> and <code>Proxy&lt;I&gt;</code> via
the <code>From</code> and <code>Into</code> traits, and get a <code>&amp;Proxy&lt;I&gt;</code> from an <code>I</code> via the <code>AsRef</code> trait.</li>
<li>As a <code>Main&lt;I&gt;</code>. This represents a main handle to this proxy, and allows you greater
control of the object, but cannot be shared accros threads. This handle allows you to
assign filters to the object, and send requests that create new objects.</li>
<li>As an <code>Attached&lt;I&gt;</code>. If you use more than one event queue (see below), this allows you
to control on which event queue the children object are created.</li>
</ul>
<p>There is not a 1 to 1 mapping between Rust object instances and protocol
objects. Rather, you can think of the Rust objects as <code>Rc</code>-like handles to a
Wayland object. Multiple instances of a Rust object can exist referring to the same
protocol object.</p>
<p>Similarly, the lifetimes of the protocol objects and the Rust objects are
not tightly tied. As protocol objects are created and destroyed by protocol
messages, it can happen that an object gets destroyed while one or more
Rust objects still refer to it. In such case, these Rust objects will be disabled
and the <code>alive()</code> method on the underlying <code>Proxy&lt;I&gt;</code> will start to return <code>false</code>.</p>
<p>Sending requests on dead objects will be silently ignored. And if these requests
would create new objects, these objects will be created dead.</p>
<h4 id="filters"><a class="doc-anchor" href="#filters">§</a>Filters</h4>
<p>Your wayland objects can receive events from the server, which need to be processed.
To do so, you can assign <code>Filter</code>s to your object. These are specially wrapped closure
so that several objects can be assigned to the same <code>Filter</code>, to ease state sharing
between the code handling different objects.</p>
<p>If an object is not assigned to any <code>Filter</code>, its events will instead be delivered to the
fallback closure given to its event queue when dispatching it.</p>
<h3 id="event-queues"><a class="doc-anchor" href="#event-queues">§</a>Event Queues</h3>
<p>The Wayland client machinery provides the possibility to have one or more event queues
handling the processing of received messages. All Wayland objects are associated to an
event queue, which controls when its events are dispatched.</p>
<p>Events received from the server are stored in an internal buffer, and processed (by calling
the appropriate callbacks) when the associated event queue is dispatched.</p>
<p>When you send a request creating a new object, this new object will be assigned to an event
queue depending on the parent object that created it.</p>
<ul>
<li>If the request was sent from a <code>Main&lt;I&gt;</code> handle, the child object will be assigned to the
same event queue as its parent.</li>
<li>If the request was sent from an <code>Attached&lt;I&gt;</code> handle, the child object will be assigned to
the event queue its parent has been attached to.</li>
</ul>
<p>At the beginning you’ll need to create an event queue and assign the initial <code>Proxy&lt;WlDisplay&gt;</code>
to it.</p>
<h3 id="dynamic-linking-with-libwayland-clientso"><a class="doc-anchor" href="#dynamic-linking-with-libwayland-clientso">§</a>Dynamic linking with <code>libwayland-client.so</code></h3>
<p>If you need to gracefully handle the case of a system on which Wayland is not installed (by
fallbacking to X11 for example), you can do so by activating the <code>dlopen</code> cargo feature.</p>
<p>When this is done, the library will be loaded a runtime rather than directly linked. And trying
to create a <code>Display</code> on a system that does not have this library will return a <code>NoWaylandLib</code>
error.</p>
</div></details><h2 id="modules" class="section-header">Modules<a href="#modules" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="mod" href="protocol/index.html" title="mod wayland_client::protocol">protocol</a></div></li><li><div class="item-name"><a class="mod" href="sys/index.html" title="mod wayland_client::sys">sys</a></div><div class="desc docblock-short">C-associated types</div></li></ul><h2 id="macros" class="section-header">Macros<a href="#macros" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="macro" href="macro.event_enum.html" title="macro wayland_client::event_enum">event_enum</a></div><div class="desc docblock-short">Generate an enum joining several objects events</div></li><li><div class="item-name"><a class="macro" href="macro.global_filter.html" title="macro wayland_client::global_filter">global_filter</a></div><div class="desc docblock-short">Convenience macro to create a <code>GlobalManager</code> callback</div></li></ul><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="struct" href="struct.AnonymousObject.html" title="struct wayland_client::AnonymousObject">AnonymousObject</a></div><div class="desc docblock-short">Anonymous interface</div></li><li><div class="item-name"><a class="struct" href="struct.Attached.html" title="struct wayland_client::Attached">Attached</a></div><div class="desc docblock-short">A handle to a proxy that has been attached to an event queue</div></li><li><div class="item-name"><a class="struct" href="struct.DispatchData.html" title="struct wayland_client::DispatchData">DispatchData</a></div><div class="desc docblock-short">Holder of global dispatch-related data</div></li><li><div class="item-name"><a class="struct" href="struct.Display.html" title="struct wayland_client::Display">Display</a></div><div class="desc docblock-short">A connection to a wayland server</div></li><li><div class="item-name"><a class="struct" href="struct.EventQueue.html" title="struct wayland_client::EventQueue">EventQueue</a></div><div class="desc docblock-short">An event queue for protocol messages</div></li><li><div class="item-name"><a class="struct" href="struct.Filter.html" title="struct wayland_client::Filter">Filter</a></div><div class="desc docblock-short">An event filter</div></li><li><div class="item-name"><a class="struct" href="struct.GlobalManager.html" title="struct wayland_client::GlobalManager">GlobalManager</a></div><div class="desc docblock-short">An utility to manage global objects</div></li><li><div class="item-name"><a class="struct" href="struct.Main.html" title="struct wayland_client::Main">Main</a></div><div class="desc docblock-short">A main handle to a proxy</div></li><li><div class="item-name"><a class="struct" href="struct.ProtocolError.html" title="struct wayland_client::ProtocolError">ProtocolError</a></div><div class="desc docblock-short">A protocol error</div></li><li><div class="item-name"><a class="struct" href="struct.Proxy.html" title="struct wayland_client::Proxy">Proxy</a></div><div class="desc docblock-short">An handle to a wayland proxy</div></li><li><div class="item-name"><a class="struct" href="struct.QueueToken.html" title="struct wayland_client::QueueToken">QueueToken</a></div><div class="desc docblock-short">A token representing this event queue</div></li><li><div class="item-name"><a class="struct" href="struct.RawEvent.html" title="struct wayland_client::RawEvent">RawEvent</a></div><div class="desc docblock-short">An generic event</div></li><li><div class="item-name"><a class="struct" href="struct.ReadEventsGuard.html" title="struct wayland_client::ReadEventsGuard">ReadEventsGuard</a></div><div class="desc docblock-short">A guard over a read intention.</div></li><li><div class="item-name"><a class="struct" href="struct.UserData.html" title="struct wayland_client::UserData">UserData</a></div><div class="desc docblock-short">A wrapper for user data, able to store any type, and correctly
handling access from a wrong thread</div></li></ul><h2 id="enums" class="section-header">Enums<a href="#enums" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="enum" href="enum.Argument.html" title="enum wayland_client::Argument">Argument</a></div><div class="desc docblock-short">Enum of possible argument in an event</div></li><li><div class="item-name"><a class="enum" href="enum.ConnectError.html" title="enum wayland_client::ConnectError">ConnectError</a></div><div class="desc docblock-short">Enum representing the possible reasons why connecting to the wayland server failed</div></li><li><div class="item-name"><a class="enum" href="enum.GlobalError.html" title="enum wayland_client::GlobalError">GlobalError</a></div><div class="desc docblock-short">An error that occurred trying to bind a global</div></li><li><div class="item-name"><a class="enum" href="enum.GlobalEvent.html" title="enum wayland_client::GlobalEvent">GlobalEvent</a></div><div class="desc docblock-short">Event provided to the user callback of GlobalManager</div></li><li><div class="item-name"><a class="enum" href="enum.NoMessage.html" title="enum wayland_client::NoMessage">NoMessage</a></div><div class="desc docblock-short">An empty enum representing a MessageGroup with no messages</div></li><li><div class="item-name"><a class="enum" href="enum.ProxyMap.html" title="enum wayland_client::ProxyMap">ProxyMap</a></div><div class="desc docblock-short">This type only exists for type-level compatibility
with the rust implementation.</div></li></ul><h2 id="traits" class="section-header">Traits<a href="#traits" class="anchor">§</a></h2><ul class="item-table"><li><div class="item-name"><a class="trait" href="trait.GlobalImplementor.html" title="trait wayland_client::GlobalImplementor">GlobalImplementor</a></div><div class="desc docblock-short">A trait for implementation of the global advertisement</div></li><li><div class="item-name"><a class="trait" href="trait.Interface.html" title="trait wayland_client::Interface">Interface</a></div><div class="desc docblock-short">The description of a wayland interface</div></li><li><div class="item-name"><a class="trait" href="trait.MessageGroup.html" title="trait wayland_client::MessageGroup">MessageGroup</a></div><div class="desc docblock-short">A group of messages</div></li></ul></section></div></main></body></html>